<!DOCTYPE html>
<html lang="pt-br">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Promises</title>
</head>

<body>
   <script>
      // pendente
      // realizada
      // rejeitada
      // estabelecida
      console.log('')

      const cep = '01001000'

      function jaRealizada() {
         return Promise.resolve(cep)
      }

      jaRealizada().then((data) => {
         console.log('Promise resolvida', data)
      })

      function promiseTrabalhada() {
         return new Promise(function (resolve, reject) {
            resolve('Ola trabalhada')
         })
      }

      promiseTrabalhada().then((message) => {
         console.log(message)
      })

      function promiseTrabalhada2() {
         return new Promise(function (resolve, reject) {
            setTimeout(() => {
               resolve('Hello world')
            }, 2000)
         })
      }

      promiseTrabalhada2().then((message) => {
         console.log(message)
      })

      // http://viacep.com.br/ws/01001000/json/
      function pegaCEP(cep) {
            return fetch('http://viacep.com.br/ws/' + cep + '/json/')
         }

      function extrairEndereco(data) {
            return data.json()
         }

      function imprimeEndereco(endereco) {
            return console.log(endereco)
         }

      function tratarErro(err) {
         console.log('Aconteceu um erro!', err)
      }

      function always() {
         console.log('Sempre executada!')
      }

      jaRealizada()
         .then(pegaCEP)
         .then(extrairEndereco)
         .then(imprimeEndereco)
         .catch(tratarErro)
         .finally(always)

      // https://swapi.dev/api/people/1/
      fetch('https://swapi.dev/api/people/1/')
         .then((response) => {
            return response.json()
         })
         .then((data) => {
            return console.log(data.name)
         })



   </script>
</body>

</html>